"use strict";(self.webpackChunkhoney_beer_app=self.webpackChunkhoney_beer_app||[]).push([[830],{5830:(I,g,o)=>{o.r(g),o.d(g,{PersonalOffersModule:()=>v});var l=o(4755),a=o(9401),c=o(7179),u=o(1135),C=o(727),h=o(4004),m=o(7372),n=o(5206),y=o(5302);function x(t,f){if(1&t&&(n.TgZ(0,"h1"),n._uU(1,"For product: "),n._UZ(2,"br"),n._uU(3),n.qZA()),2&t){const e=n.oxw().$implicit;n.xp6(3),n.Oqu(e.offerInstance.productInstance.name)}}function O(t,f){if(1&t&&(n.TgZ(0,"p"),n._uU(1,"description: "),n._UZ(2,"br"),n._uU(3),n.qZA()),2&t){const e=n.oxw().$implicit;n.xp6(3),n.Oqu(e.offerInstance.productInstance.description)}}function P(t,f){if(1&t){const e=n.EpF();n.TgZ(0,"div")(1,"h1"),n._uU(2),n.qZA(),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.YNc(5,x,4,1,"h1",12),n.YNc(6,O,4,1,"p",12),n.TgZ(7,"button",13),n.NdJ("click",function(){const d=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.redirectToEdit(d))}),n._uU(8,"Edit"),n.qZA()()}if(2&t){const e=f.$implicit,s=n.oxw();n.xp6(2),n.hij("Offer: ",e.offerInstance.amount,"%"),n.xp6(2),n.AsE("from ",s.convertDate(e.offerInstance.beginDate)," to ",s.convertDate(e.offerInstance.endDate),""),n.xp6(1),n.Q6J("ngIf",null!=e.offerInstance.productInstance),n.xp6(1),n.Q6J("ngIf",null!=e.offerInstance.productInstance)}}function b(t,f){1&t&&(n.TgZ(0,"ng-component")(1,"h1"),n._uU(2,"Loading..."),n.qZA()())}function M(t,f){1&t&&(n.TgZ(0,"h1"),n._uU(1,"No results"),n.qZA())}const D=[{path:"",children:[{path:"",component:(()=>{class t{constructor(e,s,r,d){this.offerByCompanyController=e,this.companyController=s,this.fb=r,this.router=d,this.observable=new u.X(new Array),this.offerByCompanyList=[],this.subs=new C.w0,this.subs.add(m.Z.companyObservable.subscribe(i=>this.registeredCompany=i)),this.subs.add(this.offerByCompanyController.loadAllOffersByCompany(this.registeredCompany).pipe((0,h.U)(i=>(i.map(p=>{p.offerInstance.beginDate=new Date(p.offerInstance.beginDate.toString().split("T")[0]),p.offerInstance.endDate=new Date(p.offerInstance.endDate.toString().split("T")[0]),p.companyInstance=this.registeredCompany}),i))).subscribe(i=>{this.observable=new u.X(i),this.offerByCompanyList=i},i=>alert(i.error.detail))),this.offersFG=this.fb.group({discount:this.discount,beginDate:this.offerBeginDate,endDate:this.offerEndDate,productName:this.productName,productDescription:this.productDescription}),this.offersFG.valueChanges.subscribe(i=>{this.selectData(i)})}ngOnDestroy(){this.subs.unsubscribe()}selectData(e){this.observable.subscribe(s=>{this.offerByCompanyList=s,null!=e.discount&&0!=e.discount&&(this.offerByCompanyList=this.offerByCompanyList.filter(r=>r.offerInstance.amount==e.discount)),null!=e.beginDate&&""!=e.beginDate&&(this.offerByCompanyList=this.offerByCompanyList.filter(r=>r.offerInstance.beginDate.toISOString()==new Date(String(e.beginDate)).toISOString())),null!=e.endDate&&""!=e.endDate&&(this.offerByCompanyList=this.offerByCompanyList.filter(r=>r.offerInstance.endDate.toISOString()==new Date(String(e.endDate)).toISOString())),null!=e.productName&&(this.offerByCompanyList=this.offerByCompanyList.filter(r=>r.offerInstance.productInstance?.name.includes(String(e.productName)))),null!=e.productDescription&&(this.offerByCompanyList=this.offerByCompanyList.filter(r=>r.offerInstance.productInstance?.description.includes(String(e.productDescription))))})}saveOfferByCompanyToLoad(e){this.offerByCompanyController.setOfferByCompanyToLoad(e)}redirectToEdit(e){this.router.navigate([`/app/personal_offers/${e.offerId}/edit`]),this.saveOfferByCompanyToLoad(e)}convertDate(e){return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(y.r),n.Y36(m.Z),n.Y36(a.qu),n.Y36(c.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-personal-offers-content"]],decls:18,vars:4,consts:[[1,"personal-offers-page"],[3,"formGroup"],["type","number","name","number","formControlName","discount","placeholder","Discount"],["for","beginDate"],["type","date","name","beginDate","formControlName","beginDate",1,"date"],["for","endDate"],["type","date","name","endDate","formControlName","endDate",1,"date"],["type","text","name","product","placeholder","Product name","formControlName","productName"],["type","text","placeholder","Product description","formControlName","productDescription"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["noResult",""],[4,"ngIf"],[1,"btn-redirect",3,"click"]],template:function(e,s){if(1&e&&(n.TgZ(0,"div",0)(1,"form",1),n._UZ(2,"input",2),n.TgZ(3,"div")(4,"label",3),n._uU(5,"Begin date:"),n.qZA(),n._UZ(6,"input",4),n.qZA(),n.TgZ(7,"div")(8,"label",5),n._uU(9,"End date:"),n.qZA(),n._UZ(10,"input",6),n.qZA(),n._UZ(11,"input",7)(12,"input",8),n.qZA(),n.TgZ(13,"div"),n.YNc(14,P,9,5,"div",9),n.YNc(15,b,3,0,"ng-component",10),n.YNc(16,M,2,0,"ng-template",null,11,n.W1O),n.qZA()()),2&e){const r=n.MAs(17);n.xp6(1),n.Q6J("formGroup",s.offersFG),n.xp6(13),n.Q6J("ngForOf",s.offerByCompanyList),n.xp6(1),n.Q6J("ngIf",s.offerByCompanyList.length>0)("ngIfElse",r)}},dependencies:[l.sg,l.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,c.fw],styles:[".personal-offers-page[_ngcontent-%COMP%]{height:100%;width:100%;display:flex}.personal-offers-page[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:5px 20px;font-size:16px;border-radius:15px;outline:none}.personal-offers-page[_ngcontent-%COMP%]   .btn-redirect[_ngcontent-%COMP%]{border:1px solid #B7ADA1;border-radius:3px;padding:10px 20px;font-family:Freizeit120;font-weight:300;background-color:#1e1e1e;color:#fff;text-decoration:none;margin-top:20px;transition:background-color .2s ease-in-out,color .2s ease-in-out,box-shadow .2s ease-in-out}.personal-offers-page[_ngcontent-%COMP%]   .btn-redirect[_ngcontent-%COMP%]:hover{color:#1e1e1e;border-color:#b7ada1;background-color:#fffcf2;box-shadow:4px -4px #fffcf2,-4px 4px #fffcf2,-4px -4px #fffcf2,4px 4px #fffcf2}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{padding:20px 0;margin-inline:50px;border-radius:15px;margin-top:50px;width:20%;min-width:300px;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:-moz-fit-content;height:fit-content;gap:20px;background-color:#e4ddcd99;max-width:200px}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-align:center;font-family:Freizeit120;padding:5px 0}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:100%;text-align:center}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%], .personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child   input[_ngcontent-%COMP%]{width:80%}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{width:80%;padding:50px 20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));height:-moz-fit-content;height:fit-content}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{padding:20px 40px;border:1px solid rgb(235,235,235);display:flex;flex-direction:column;align-items:center;background-color:#ffffffb3;border-radius:15px;box-shadow:0 10px 15px #00000040;text-align:center;height:100%;max-width:300px;margin-inline:auto}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{font-family:Freizeit120;font-size:24px;margin:10px 0}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child > h1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}@media only screen and (max-width: 700px){.personal-offers-page[_ngcontent-%COMP%]{flex-direction:column}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{margin-inline:auto}.personal-offers-page[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{width:100%}}"]}),t})()},{path:":id/edit",loadChildren:()=>o.e(50).then(o.bind(o,8050)).then(t=>t.UpdateOfferModule)}]}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[c.Bz.forChild(D),c.Bz]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez,a.u5,a.UX,_]}),t})()}}]);