"use strict";(self.webpackChunkhoney_beer_app=self.webpackChunkhoney_beer_app||[]).push([[273],{6273:(x,d,f)=>{f.r(d),f.d(d,{OffersModule:()=>b});var p=f(4755),c=f(7179),l=f(8143),u=f(727),g=f(1135),e=f(5206),a=f(9401);let m=(()=>{class n{constructor(t,o){this.router=t,this.offerController=o}redirectToPersonalOffer(t){this.router.navigateByUrl(`app/offers/${t.offerId}/create`),this.offerController.setOffer(t)}convertDate(t){return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.F0),e.Y36(l.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-offer-card"]],inputs:{offer:"offer"},decls:13,vars:5,consts:[[1,"offer-card"],[3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"h1"),e._uU(6,"For product: "),e._UZ(7,"br"),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.TgZ(11,"button",1),e.NdJ("click",function(){return o.redirectToPersonalOffer(o.offer)}),e._uU(12,"Personalize offer"),e.qZA()()),2&t&&(e.xp6(2),e.hij("Offer: ",o.offer.amount,"%"),e.xp6(2),e.AsE(" from ",o.convertDate(o.offer.beginDate)," to ",o.convertDate(o.offer.endDate),""),e.xp6(4),e.hij(" ",null==o.offer.productInstance?null:o.offer.productInstance.name,""),e.xp6(2),e.Oqu(null==o.offer.productInstance?null:o.offer.productInstance.description))},styles:[".offer-card[_ngcontent-%COMP%]{min-width:250px;width:-moz-fit-content;width:fit-content;gap:10px;padding:50px;border:1px solid rgb(235,235,235);display:flex;flex-direction:column;align-items:center;background-color:#ffffffb3;border-radius:15px;box-shadow:0 10px 15px #00000040;text-align:center}.offer-card[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #B7ADA1;border-radius:3px;padding:10px 20px;font-family:Freizeit120;background-color:#1e1e1e;color:#fff;height:-moz-fit-content;height:fit-content;transition:background-color .2s ease-in-out,color .2s ease-in-out,box-shadow .2s ease-in-out}.offer-card[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#1e1e1e;border-color:#b7ada1;background-color:#fffcf2;box-shadow:4px -4px #fffcf2,-4px 4px #fffcf2,-4px -4px #fffcf2,4px 4px #fffcf2}"]}),n})();function h(n,i){1&n&&e._UZ(0,"app-offer-card",11),2&n&&e.Q6J("offer",i.$implicit)}const O=[{path:"",children:[{path:"",component:(()=>{class n{constructor(t,o){this.offerController=t,this.fb=o,this.subs=new u.w0,this.observable=new g.X(new Array),this.offerController.loadAllOffers().subscribe(r=>{r.map(s=>(s.beginDate=new Date(s.beginDate.toString().split("T")[0]),s.endDate=new Date(s.endDate.toString().split("T")[0]),s)),this.observable.next(r),this.offers=r},r=>alert(r.error.detail)),this.offersFG=this.fb.group({discount:this.discount,beginDate:this.offerBeginDate,endDate:this.offerEndDate,productName:this.productName,productDescription:this.productDescription}),this.subs.add(this.offersFG.valueChanges.subscribe(r=>{this.selectData(r)}))}ngOnDestroy(){this.subs.unsubscribe()}selectData(t){this.observable.subscribe(o=>{this.offers=o,null!=t.discount&&0!=t.discount&&(this.offers=this.offers.filter(r=>r.amount==t.discount)),null!=t.beginDate&&""!=t.beginDate&&(this.offers=this.offers.filter(r=>r.beginDate.toISOString()==new Date(String(t.beginDate)).toISOString())),null!=t.endDate&&""!=t.endDate&&(this.offers=this.offers.filter(r=>r.endDate.toISOString()==new Date(String(t.endDate)).toISOString())),null!=t.productName&&(this.offers=this.offers.filter(r=>r.productInstance?.name.includes(String(t.productName)))),null!=t.productDescription&&(this.offers=this.offers.filter(r=>r.productInstance?.description.includes(String(t.productDescription))))})}convertDate(t){return t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.Z),e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-offers"]],decls:15,vars:2,consts:[[1,"offers-container"],[3,"formGroup"],["type","number","name","number","formControlName","discount","placeholder","Discount"],["for","beginDate"],["type","date","name","beginDate","formControlName","beginDate",1,"date"],["for","endDate"],["type","date","name","endDate","formControlName","endDate",1,"date"],["type","text","name","product","placeholder","Product name","formControlName","productName"],["type","text","placeholder","Product description","formControlName","productDescription"],[1,"offers-page"],[3,"offer",4,"ngFor","ngForOf"],[3,"offer"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"input",2),e.TgZ(3,"div")(4,"label",3),e._uU(5,"Begin date:"),e.qZA(),e._UZ(6,"input",4),e.qZA(),e.TgZ(7,"div")(8,"label",5),e._uU(9,"End date:"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e._UZ(11,"input",7)(12,"input",8),e.qZA(),e.TgZ(13,"div",9),e.YNc(14,h,1,1,"app-offer-card",10),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.offersFG),e.xp6(13),e.Q6J("ngForOf",o.offers))},dependencies:[p.sg,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,m],styles:[".offers-page[_ngcontent-%COMP%]{display:grid;width:100%;gap:20px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.offers-container[_ngcontent-%COMP%]{display:flex;margin:50px;gap:20px}.offers-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{padding:20px 0;margin-inline:20px;border-radius:15px;width:20%;min-width:250px;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;gap:20px;background-color:#e4ddcd99;max-width:200px;max-height:400px}.offers-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.offers-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-align:center;font-family:Freizeit120;padding:5px 0}.offers-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:100%;text-align:center;border:none;padding:5px;outline:none}.offers-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%], .offers-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child   input[_ngcontent-%COMP%]{width:80%;border:none;text-align:center;font-size:16px}.offers-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child > input[_ngcontent-%COMP%]{padding:5px;outline:none}@media only screen and (max-width: 730px){.offers-container[_ngcontent-%COMP%]{flex-direction:column;margin:10px}}"]}),n})()},{path:":id/create",loadChildren:()=>f.e(638).then(f.bind(f,638)).then(n=>n.CreateOfferModule)}]}];let C=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild(O),c.Bz]}),n})(),b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,C,a.UX]}),n})()}}]);