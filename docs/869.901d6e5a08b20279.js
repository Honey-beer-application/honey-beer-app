"use strict";(self.webpackChunkhoney_beer_app=self.webpackChunkhoney_beer_app||[]).push([[869],{6869:(J,p,u)=>{u.r(p),u.d(p,{SurveyModule:()=>P});var c=u(4755),v=u(7179),f=u(727),g=u(4888),r=u(9401),d=u(1758),e=u(5206),m=u(4568);function _(n,i){1&n&&(e.ynx(0,4),e._UZ(1,"textarea",8),e.BQk()),2&n&&e.Q6J("formGroupName",i.index)}function y(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"(Required)"),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,_,2,1,"ng-container",2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(4),e.Q6J("ngForOf",o.returnAnswersArray(t))}}function x(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"input",9),e.TgZ(2,"label"),e._uU(3),e.qZA()()),2&n){const t=i.$implicit;let s;e.Q6J("formGroupName",i.index),e.xp6(3),e.Oqu(null==(s=t.get("label"))?null:s.value)}}function w(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"(2 options at least must be checked)"),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,x,4,2,"div",2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(4),e.Q6J("ngForOf",o.returnAnswersArray(t))}}function h(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"input",11),e.TgZ(2,"label"),e._uU(3),e.qZA()()),2&n){const t=i.$implicit;let o,s;e.xp6(1),e.s9C("value",null==(o=t.get("value"))?null:o.value),e.xp6(2),e.Oqu(null==(s=t.get("value"))?null:s.value)}}function C(n,i){if(1&n&&(e.ynx(0,4),e.YNc(1,h,4,2,"div",10),e.BQk()),2&n){const t=i.$implicit,o=i.index,s=e.oxw(3);e.Q6J("formGroupName",o),e.xp6(1),e.Q6J("ngForOf",s.returnLabelsArray(t))}}function O(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"(1 option must be checked)"),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,C,2,2,"ng-container",2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(4),e.Q6J("ngForOf",o.returnAnswersArray(t))}}function b(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"input",9),e.TgZ(2,"label"),e._uU(3),e.qZA()()),2&n){const t=i.$implicit;let s;e.Q6J("formGroupName",i.index),e.xp6(3),e.Oqu(null==(s=t.get("label"))?null:s.value)}}function A(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"(Optional)"),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,b,4,2,"div",2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(4),e.Q6J("ngForOf",o.returnAnswersArray(t))}}function F(n,i){if(1&n&&(e.TgZ(0,"div",4)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e.YNc(4,y,5,1,"ng-container",6),e.YNc(5,w,5,1,"ng-container",6),e.YNc(6,O,5,1,"ng-container",6),e.YNc(7,A,5,1,"ng-container",6),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("formGroupName",i.index),e.xp6(2),e.Oqu(t.controls.questionName.value),e.xp6(1),e.Q6J("ngSwitch",t.controls.questionType.value),e.xp6(1),e.Q6J("ngSwitchCase","Text"),e.xp6(1),e.Q6J("ngSwitchCase","Multiple choice"),e.xp6(1),e.Q6J("ngSwitchCase","Single choice"),e.xp6(1),e.Q6J("ngSwitchCase","Optional")}}function S(n){return"Multiple choice"===n?n=>{let i=0;return n.controls.forEach(t=>{1==t.value.value&&i++}),i>=2?null:{error:"At least 2 options must be selected."}}:n=>null}const Z=[{path:"",component:(()=>{class n{constructor(t,o,s){this.surveyController=t,this.fb=o,this.eventController=s,this.subs=new f.w0,this.survey=new g.j,this.surveyForm=new r.cw({questions:new r.Oe(new Array)}),this.answers=new Array,this.subs.add(this.surveyController.surveyToLoad.asObservable().subscribe(a=>{this.survey=a}))}ngOnInit(){let t=new Array;this.survey.questions.map(o=>{let s=[],a=[];o.answers.map(l=>{"Text"==o.questionTypeInstance.name?a.push(new r.cw({label:new r.NI(l.value),value:new r.NI("",r.kI.required)})):"Single choice"==o.questionTypeInstance.name?s.push(new r.cw({value:new r.NI(l.value)})):a.push(new r.cw({label:new r.NI(l.value),value:new r.NI(!1)}))}),"Single choice"==o.questionTypeInstance.name&&a.push(new r.cw({labels:new r.Oe(s),value:new r.NI("",r.kI.required)})),t.push(new r.cw({questionType:new r.NI(o.questionTypeInstance.name),questionName:new r.NI(o.text),answers:new r.Oe(a,S(o.questionTypeInstance.name))}))}),this.surveyForm=new r.cw({questions:new r.Oe(t)})}ngOnDestroy(){this.subs.unsubscribe()}get questions(){return this.surveyForm.controls.questions.controls}returnAnswersArray(t){return t.controls.answers.controls}returnLabelsArray(t){return t.controls.labels.controls}saveAnswers(){this.surveyForm.valid?(this.surveyForm.value.questions?.forEach((t,o)=>{if("Single choice"==t.questionType){let s=new d.O;s=this.survey.questions[o].answers.filter(a=>a.value==t.answers[0].value)[0],this.survey.questions[o].answers=new Array,this.survey.questions[o].answers.push(s)}else t.answers.forEach((s,a)=>{this.survey.questions[o].answers[a].value=s.value}),"Text"!=t.questionType&&(this.survey.questions[o].answers=this.survey.questions[o].answers.filter(s=>s.value.toString()==(!0).toString()))}),this.subs.add(this.eventController.saveEventForm(this.survey).subscribe(t=>alert("Form is successfully submitted."),t=>alert(JSON.stringify(t))))):alert("Values are not entered correctly.")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.q),e.Y36(r.qu),e.Y36(m.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-survey"]],decls:7,vars:3,consts:[[1,"surveyForm",3,"formGroup"],["formArrayName","questions"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"click"],[3,"formGroupName"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formArrayName","answers"],["formControlName","value","type","text"],["formControlName","value","type","checkbox"],[4,"ngFor","ngForOf"],["formControlName","value","type","radio","name","value",3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0)(1,"h1"),e._uU(2),e.qZA(),e.ynx(3,1),e.YNc(4,F,8,7,"div",2),e.BQk(),e.TgZ(5,"button",3),e.NdJ("click",function(){return o.saveAnswers()}),e._uU(6,"Submit your answers"),e.qZA()()),2&t&&(e.Q6J("formGroup",o.surveyForm),e.xp6(2),e.Oqu(o.survey.title),e.xp6(2),e.Q6J("ngForOf",o.questions))},dependencies:[c.sg,c.RF,c.n9,r._Y,r.Fj,r.Wl,r._,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE],styles:['.surveyForm[_ngcontent-%COMP%]{border-radius:15px;margin:50px 0;padding:20px 0;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:column;align-items:center;gap:20px;max-width:1250px;margin-inline:auto;box-shadow:0 5px 20px #00000040}.surveyForm[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{font-family:Freizeit120;font-size:30px;font-weight:bolder}.surveyForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:80%;display:flex;flex-direction:column;border:1px solid rgba(0,0,0,.15);padding:30px}.surveyForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-family:Freizeit120;font-size:20px;padding:10px 10px 0}.surveyForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:100%}.surveyForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-family:Freizeit120;font-size:16px;padding:0 10px}.surveyForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:10px}.surveyForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:10px;font-size:18px;display:flex;flex-wrap:nowrap;gap:10px;font-family:Freizeit120}.surveyForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > textarea[_ngcontent-%COMP%]{font-size:18px;padding:10px;min-height:100px;width:100%;overflow:visible;resize:none;outline:none;border:0px solid transparent;font-style:"Freizeit120"}.surveyForm[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border:1px solid #B7ADA1;border-radius:3px;font-size:22px;margin-top:20px;margin-bottom:20px;padding:10px 20px;font-family:Freizeit120;background-color:#1e1e1e;color:#fff;height:-moz-fit-content;height:fit-content;transition:background-color .2s ease-in-out,color .2s ease-in-out,box-shadow .2s ease-in-out}.surveyForm[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#1e1e1e;border-color:#b7ada1;background-color:#fffcf2;box-shadow:4px -4px #fffcf2,-4px 4px #fffcf2,-4px -4px #fffcf2,4px 4px #fffcf2}']}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,v.Bz.forChild(Z),v.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,N,r.UX]}),n})()}}]);