"use strict";(self.webpackChunkhoney_beer_app=self.webpackChunkhoney_beer_app||[]).push([[50],{8050:(B,d,a)=>{a.r(d),a.d(d,{UpdateOfferModule:()=>h});var c=a(4755),p=a(7179),y=a(7372),o=a(9401),m=a(727),l=a(9300),e=a(5206),u=a(5302);const C=[{path:"",component:(()=>{class n{constructor(t,r,s,b){this.offerByCompanyController=t,this.activatedRoute=r,this.companyController=s,this.fb=b,this.subs=new m.w0,this.offerAmount=new o.NI("",[o.kI.required,o.kI.min(0)]),this.offerBeginDate=new o.NI("",o.kI.required),this.offerEndDate=new o.NI("",o.kI.required),this.subs.add(y.Z.companyObservable.subscribe(f=>this.registeredCompany=f)),this.offerByCompanyController.offerByCompanyToLoadObservable.subscribe(f=>this.offerByCompany=f),this.subs.add(this.offerByCompanyController.getOfferByCompany(r.snapshot.params.id).subscribe(f=>{this.offerByCompany=f,this.offerByCompany.companyInstance=this.registeredCompany,this.offerByCompany.offerInstance.beginDate=new Date(this.offerByCompany.offerInstance.beginDate.toString().split("T")[0]),this.offerByCompany.offerInstance.endDate=new Date(this.offerByCompany.offerInstance.endDate.toString().split("T")[0])})),this.offerAmount.setValue(this.offerByCompany.offerInstance.amount),this.offerBeginDate.setValue(this.convertDate(this.offerByCompany.offerInstance.beginDate)),this.offerEndDate.setValue(this.convertDate(this.offerByCompany.offerInstance.endDate)),this.offerByCompanyForm=this.fb.group({discount:this.offerAmount,beginDate:this.offerBeginDate,endDate:this.offerEndDate}),this.subs.add(this.offerByCompanyForm.valueChanges.pipe((0,l.h)(f=>this.offerByCompanyForm.valid)).subscribe(f=>{this.offerByCompany.offerInstance.amount=f.discount,this.offerByCompany.offerInstance.beginDate=new Date(f.beginDate),this.offerByCompany.offerInstance.endDate=new Date(f.endDate)}))}ngOnDestroy(){this.subs.unsubscribe()}saveOfferByComapny(){this.offerByCompanyController.changeOfferByCompany(this.offerByCompany).subscribe(t=>alert("Offer is successfully changed."),t=>alert(t.error.detail))}convertDate(t){var r=t.getDate(),s=t.getMonth()+1;return t.getFullYear()+"-"+(s<10?"0"+s:s)+"-"+(r<9?"0"+r:r)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.r),e.Y36(p.gz),e.Y36(y.Z),e.Y36(o.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-offer"]],decls:12,vars:4,consts:[[1,"offerByCompanyCard",3,"formGroup"],["type","number","placeholder","Discount","formControlName","discount",3,"value"],["for","beginDate"],["type","date","name","beginDate","formControlName","beginDate",3,"value"],["for","endDate"],["type","date","name","endDate","formControlName","endDate",3,"value"],[3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"div")(3,"label",2),e._uU(4,"Begin date:"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div")(7,"label",4),e._uU(8,"End date:"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return r.saveOfferByComapny()}),e._uU(11,"Save offer"),e.qZA()()),2&t&&(e.Q6J("formGroup",r.offerByCompanyForm),e.xp6(1),e.Q6J("value",r.offerByCompany.offerInstance.amount),e.xp6(4),e.Q6J("value",r.convertDate(r.offerByCompany.offerInstance.beginDate)),e.xp6(4),e.Q6J("value",r.convertDate(r.offerByCompany.offerInstance.endDate)))},dependencies:[o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u],styles:["div[_ngcontent-%COMP%]{height:100%}.offerByCompanyCard[_ngcontent-%COMP%]{margin-top:200px;margin-inline:auto;padding:20px 0;border-radius:15px;width:20%;min-width:300px;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:-moz-fit-content;height:fit-content;gap:20px;background-color:#e4ddcd99;max-width:200px}.offerByCompanyCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.offerByCompanyCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-align:center;font-family:Freizeit120;padding:5px 0}.offerByCompanyCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:100%;text-align:center}.offerByCompanyCard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .offerByCompanyCard[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%}.offerByCompanyCard[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:5px 20px;font-size:16px;border-radius:15px;outline:none}.offerByCompanyCard[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border:1px solid #B7ADA1;border-radius:3px;padding:10px 20px;font-family:Freizeit120;background-color:#1e1e1e;color:#fff;transition:background-color .2s ease-in-out,color .2s ease-in-out,box-shadow .2s ease-in-out}.offerByCompanyCard[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#1e1e1e;border-color:#b7ada1;background-color:#fffcf2;box-shadow:4px -4px #fffcf2,-4px 4px #fffcf2,-4px -4px #fffcf2,4px 4px #fffcf2}"]}),n})()}];let g=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(C),p.Bz]}),n})(),h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,o.UX,g]}),n})()}}]);