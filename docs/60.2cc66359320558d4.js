"use strict";(self.webpackChunkhoney_beer_app=self.webpackChunkhoney_beer_app||[]).push([[60],{7060:(T,c,o)=>{o.r(c),o.d(c,{AccountModule:()=>P});var l=o(4755),u=o(7179),r=o(9401),f=o(727),p=o(4004),g=o(9300),h=o(5731),C=o(7036),y=o(7372),v=o(665),d=o(6200);class b{get pib(){return this._pib}set pib(i){this._pib=i}get dateAndTime(){return this._dateAndTime}set dateAndTime(i){this._dateAndTime=i}constructor(){this._pib=0n,this._dateAndTime=new Date}}var n=o(5206),x=o(3144);let E=(()=>{class t{constructor(e){this.httpClient=e}saveSentComapnyEmail(e){return this.httpClient.post("https://honeybeer.bsite.net/api/SentCompanyEmail",{pib:Number(e.pib),dateAndTime:e.dateAndTime})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(x.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A=(()=>{class t{constructor(e){this.sentCompanyEmailService=e}saveCompanyEmail(e){return this.sentCompanyEmailService.saveSentComapnyEmail(e)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(E))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function M(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"div",1)(1,"h3"),n._uU(2,"Any questions?"),n.qZA(),n._UZ(3,"input",2)(4,"textarea",3),n.TgZ(5,"button",4),n.NdJ("click",function(){n.CHM(e);const m=n.oxw();return n.KtG(m.sendEmail())}),n._uU(6,"Send suggestion"),n.qZA()()}if(2&t){const e=n.oxw();n.Q6J("formGroup",e.emailForm),n.xp6(3),n.Q6J("ngClass",null==e.titleEntered?"none":1==e.titleEntered?"success":"error"),n.xp6(1),n.Q6J("ngClass",null==e.messageEntered?"none":1==e.messageEntered?"success":"error")}}const F=[{path:"",component:(()=>{class t{constructor(e,a,m){this.fb=e,this.customerController=a,this.sentCompanyEmailController=m,this.emailEntered=void 0,this.titleEntered=void 0,this.messageEntered=void 0,this.message={from_email:"",title:"",message:""},this.subs=new f.w0,this.emailFrom=new r.NI(void 0,[r.kI.required,r.kI.email]),this.emailTitle=new r.NI(void 0,r.kI.required),this.emailMessage=new r.NI(void 0,r.kI.required),this.customer=new C.Z,this.company=new h.Z,this.emailForm=this.fb.group({from_email:this.emailFrom,title:this.emailTitle,message:this.emailMessage}),this.subs.add(this.customerController.registeredCustomer.asObservable().subscribe(s=>this.customer=s)),this.customer.customerId>0n&&(this.message.from_email=this.customer.email),this.subs.add(y.Z.companyObservable.subscribe(s=>{s.PIB>0n&&(this.message.from_email=s.email,this.company=s)})),this.subs.add(this.emailForm.valueChanges.pipe((0,p.U)(s=>(this.verifiyFields(s),s))).pipe((0,g.h)(s=>(null==s.from_email&&(s.from_email=this.message.from_email),null!=s.from_email&&null!=s.message&&null!=s.title&&s.from_email.length>0&&s.message.length>0&&s.title.length>0))).subscribe(s=>{this.message=s}))}verifiyFields(e){null!=e.from_email&&(this.emailEntered=this.emailFrom.valid),null!=e.title&&(this.titleEntered=this.emailTitle.valid),null!=e.message&&(this.messageEntered=this.emailMessage.valid)}sendEmail(){d.ZP.init("kik40nluAvZK_YLAq"),d.ZP.send("service_x8k6zkl","template_szo4oub",{from_email:this.message.from_email,message:this.message.message,title:this.message.title});let e=new b;e.pib=this.company.PIB,this.sentCompanyEmailController.saveCompanyEmail(e).subscribe(a=>alert("Email is registered in database."),a=>JSON.stringify(a)),alert("Email has been successfully sent")}isCompanyRegistered(){return 0n!=this.company.PIB}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(r.qu),n.Y36(v.Z),n.Y36(A))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-account"]],decls:1,vars:1,consts:[["class","suggestions",3,"formGroup",4,"ngIf"],[1,"suggestions",3,"formGroup"],["type","text","placeholder","Title","formControlName","title",3,"ngClass"],["name","message","formControlName","message","placeholder","Message","id","","cols","30","rows","10",3,"ngClass"],[3,"click"]],template:function(e,a){1&e&&n.YNc(0,M,7,3,"div",0),2&e&&n.Q6J("ngIf",a.isCompanyRegistered())},dependencies:[l.mk,l.O5,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".suggestions[_ngcontent-%COMP%]{min-width:300px;display:flex;flex-direction:column;gap:20px;padding:15px;width:100%;font-family:Freizeit120}.suggestions[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .suggestions[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;padding:10px;outline:none;border-radius:5px;font-family:Freizeit120}.suggestions[_ngcontent-%COMP%] > textarea[_ngcontent-%COMP%]{resize:none}.suggestions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:auto;border:1px solid #B7ADA1;border-radius:3px;padding:10px 20px;font-family:Freizeit120;background-color:#1e1e1e;color:#fff;height:-moz-fit-content;height:fit-content;transition:background-color .2s ease-in-out,color .2s ease-in-out,box-shadow .2s ease-in-out}.suggestions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#1e1e1e;border-color:#b7ada1;background-color:#fffcf2;box-shadow:4px -4px #fffcf2,-4px 4px #fffcf2,-4px -4px #fffcf2,4px 4px #fffcf2}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez,u.Bz.forChild(F),u.Bz]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez,S,r.UX]}),t})()}}]);